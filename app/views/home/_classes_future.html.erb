<%
  user_future_classes_active_students  = present_user.students.active.select{ |student| !student.section.klass.opened? }
  user_future_classes_dropped_students = present_user.students.dropped.select{ |student| !student.section.klass.opened? }
  user_future_classes_educators        = present_user.educators.select{ |educator| !educator.klass.opened? }

  user_future_classes_taking   = user_future_classes_active_students.collect{ |student| student.section.klass }
  user_future_classes_dropped  = user_future_classes_dropped_students.collect{ |student| student.section.klass }
  user_future_classes_teaching = user_future_classes_educators.collect{ |educator| educator.klass }

  user_has_future_activity = user_future_classes_taking.any?  ||
                             user_future_classes_dropped.any? ||
                             user_future_classes_teaching.any?
%>

<% if user_has_future_activity %>
  <%= section "Future Activity", {:classes => 'first no_bar', :collapsible => true, :collapsed => true} do %>
    <%= render :partial => "class_links", :locals => { :klasses      => user_future_classes_taking,
                                                       :section_name => "Classes I'll be Taking" } %>
    <%= render :partial => "class_links", :locals => { :klasses      => user_future_classes_dropped,
                                                       :section_name => "Classes I've Dropped" } %>
    <%= render :partial => "class_links", :locals => { :klasses      => user_future_classes_teaching,
                                                       :section_name => "Classes I'll be Teaching" } %>
  <% end %>
<% end %>

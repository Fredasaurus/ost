<%
  user_past_classes_active_students  = present_user.students.active.select{ |student| student.section.klass.closed? }
  user_past_classes_dropped_students = present_user.students.dropped.select{ |student| student.section.klass.closed? }
  user_past_classes_educators        = present_user.educators.select{ |educator| educator.klass.closed? }

  user_past_classes_taking   = user_past_classes_active_students.collect{ |student| student.section.klass }
  user_past_classes_dropped  = user_past_classes_dropped_students.collect{ |student| student.section.klass }
  user_past_classes_teaching = user_past_classes_educators.collect{ |educator| educator.klass }

  user_has_past_activity = user_past_classes_taking.any?  ||
                           user_past_classes_dropped.any? ||
                           user_past_classes_teaching.any?
%>

<% if user_has_past_activity %>
  <%= section "Past Activity", {:classes => 'first no_bar', :collapsible => true, :collapsed => true} do %>
    <%= render :partial => "class_links", :locals => { :klasses      => user_past_classes_taking,
                                                       :section_name => "Classes I've Taken" } %>
    <%= render :partial => "class_links", :locals => { :klasses      => user_past_classes_dropped,
                                                       :section_name => "Classes I've Dropped" } %>
    <%= render :partial => "class_links", :locals => { :klasses      => user_past_classes_teaching,
                                                       :section_name => "Classes I've Taught" } %>
  <% end %>
<% end %>
